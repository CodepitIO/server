<link rel="stylesheet" href="http://st.codeforces.com/css/ttypography.css" type="text/css" charset="utf-8"><link rel="stylesheet" href="http://st.codeforces.com/css/problem-statement.css" type="text/css" charset="utf-8"><div class="problemindexholder" problemindex="D">
<div class="ttypography"><div class="problem-statement"><div class="header"><div class="title">Drazil and Tiles</div><div class="time-limit"><div class="property-title">time limit per test</div>2 seconds</div><div class="memory-limit"><div class="property-title">memory limit per test</div>256 megabytes</div><div class="input-file"><div class="property-title">input</div>standard input</div><div class="output-file"><div class="property-title">output</div>standard output</div></div><div><p>Drazil created a following problem about putting <span class="tex-span">1&#x2009;&#xD7;&#x2009;2</span> tiles into an <span class="tex-span"><i>n</i>&#x2009;&#xD7;&#x2009;<i>m</i></span> grid:</p><p>&quot;There is a grid with some cells that are empty and some cells that are occupied. You should use <span class="tex-span">1&#x2009;&#xD7;&#x2009;2</span> tiles to cover all empty cells and no two tiles should cover each other. And you should print a solution about how to do it.&quot;</p><p>But Drazil doesn&apos;t like to write special checking program for this task. His friend, Varda advised him: &quot;how about asking contestant only to print the solution <span class="tex-font-style-it">when it exists and it is unique</span>? Otherwise contestant may print &apos;<span class="tex-font-style-tt">Not unique</span>&apos; &quot;.</p><p>Drazil found that the constraints for this task may be much larger than for the original task!</p><p>Can you solve this new problem?</p><p>Note that you should print &apos;<span class="tex-font-style-tt">Not unique</span>&apos; either when there exists no solution or when there exists several different solutions for the original task.</p></div><div class="input-specification"><div class="section-title">Input</div><p>The first line contains two integers <span class="tex-span"><i>n</i></span> and <span class="tex-span"><i>m</i></span> (<span class="tex-span">1&#x2009;&#x2264;&#x2009;<i>n</i>,&#x2009;<i>m</i>&#x2009;&#x2264;&#x2009;2000</span>).</p><p>The following <span class="tex-span"><i>n</i></span> lines describe the grid rows. Character &apos;<span class="tex-font-style-tt">.</span>&apos; denotes an empty cell, and the character &apos;<span class="tex-font-style-tt">*</span>&apos; denotes a cell that is occupied.</p></div><div class="output-specification"><div class="section-title">Output</div><p>If there is no solution or the solution is not unique, you should print the string &quot;<span class="tex-font-style-tt">Not unique</span>&quot;.</p><p>Otherwise you should print how to cover all empty cells with <span class="tex-span">1&#x2009;&#xD7;&#x2009;2</span> tiles. Use characters &quot;<span class="tex-font-style-tt">&lt;&gt;</span>&quot; to denote horizontal tiles and characters &quot;^v&quot; to denote vertical tiles. Refer to the sample test for the output format example.</p></div><div class="sample-tests"><div class="section-title">Sample test(s)</div><div class="sample-test"><div class="input"><div class="title">Input</div><pre>3 3<br>...<br>.*.<br>...<br></pre></div><div class="output"><div class="title">Output</div><pre>Not unique<br></pre></div><div class="input"><div class="title">Input</div><pre>4 4<br>..**<br>*...<br>*.**<br>....<br></pre></div><div class="output"><div class="title">Output</div><pre>&lt;&gt;**<br>*^&lt;&gt;<br>*v**<br>&lt;&gt;&lt;&gt;<br></pre></div><div class="input"><div class="title">Input</div><pre>2 4<br>*..*<br>....<br></pre></div><div class="output"><div class="title">Output</div><pre>*&lt;&gt;*<br>&lt;&gt;&lt;&gt;<br></pre></div><div class="input"><div class="title">Input</div><pre>1 1<br>.<br></pre></div><div class="output"><div class="title">Output</div><pre>Not unique<br></pre></div><div class="input"><div class="title">Input</div><pre>1 1<br>*<br></pre></div><div class="output"><div class="title">Output</div><pre>*<br></pre></div></div></div><div class="note"><div class="section-title">Note</div><p>In the first case, there are indeed two solutions:</p><pre><br>&lt;&gt;^<br>^*v<br>v&lt;&gt;<br></pre><p>and</p><pre><br>^&lt;&gt;<br>v*^<br>&lt;&gt;v<br></pre><p>so the answer is &quot;<span class="tex-font-style-tt">Not unique</span>&quot;.</p></div></div></div>
</div>