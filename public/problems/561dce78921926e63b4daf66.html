<link rel="stylesheet" href="http://st.codeforces.com/css/ttypography.css" type="text/css" charset="utf-8"><link rel="stylesheet" href="http://st.codeforces.com/css/problem-statement.css" type="text/css" charset="utf-8"><div class="problemindexholder" problemindex="E">
<div class="ttypography"><div class="problem-statement"><div class="header"><div class="title">Playing on Graph</div><div class="time-limit"><div class="property-title">time limit per test</div>3 seconds</div><div class="memory-limit"><div class="property-title">memory limit per test</div>256 megabytes</div><div class="input-file"><div class="property-title">input</div>standard input</div><div class="output-file"><div class="property-title">output</div>standard output</div></div><div><p>Vova and Marina love offering puzzles to each other. Today Marina offered Vova to cope with the following task.</p><p>Vova has a non-directed graph consisting of <span class="tex-span"><i>n</i></span> vertices and <span class="tex-span"><i>m</i></span> edges without loops and multiple edges. Let&apos;s define the operation of <span class="tex-font-style-it">contraction</span> two vertices <span class="tex-span"><i>a</i></span> and <span class="tex-span"><i>b</i></span> that are <span class="tex-font-style-bf">not connected by an edge</span>. As a result of this operation vertices <span class="tex-span"><i>a</i></span> and <span class="tex-span"><i>b</i></span> are deleted and instead of them a new vertex <span class="tex-span"><i>x</i></span> is added into the graph, and also edges are drawn from it to all vertices that were connected with <span class="tex-span"><i>a</i></span> or with <span class="tex-span"><i>b</i></span> (specifically, if the vertex was connected with both <span class="tex-span"><i>a</i></span> and <span class="tex-span"><i>b</i></span>, then also exactly one edge is added from <span class="tex-span"><i>x</i></span> to it). Thus, as a result of <span class="tex-font-style-it">contraction</span> again a non-directed graph is formed, it contains no loops nor multiple edges, and it contains <span class="tex-span">(<i>n</i>&#x2009;-&#x2009;1)</span> vertices.</p><p>Vova must perform the <span class="tex-font-style-it">contraction</span> an arbitrary number of times to transform the given graph into a <span class="tex-font-style-it">chain</span> of the maximum length. A <span class="tex-font-style-it">chain</span> of length <span class="tex-span"><i>k</i></span> (<span class="tex-span"><i>k</i>&#x2009;&#x2265;&#x2009;0</span>) is a connected graph whose vertices can be numbered with integers from <span class="tex-span">1</span> to <span class="tex-span"><i>k</i>&#x2009;+&#x2009;1</span> so that the edges of the graph connect all pairs of vertices <span class="tex-span">(<i>i</i>,&#x2009;<i>i</i>&#x2009;+&#x2009;1)</span> (<span class="tex-span">1&#x2009;&#x2264;&#x2009;<i>i</i>&#x2009;&#x2264;&#x2009;<i>k</i></span>) and only them. Specifically, the graph that consists of one vertex is a chain of length <span class="tex-span">0</span>. The vertices that are formed as a result of the <span class="tex-font-style-it">contraction</span> are allowed to be used in the following operations of <span class="tex-font-style-it">contraction</span>.</p><center> <img class="tex-graphics" src="http://codeforces.com/predownloaded/e5/1d/e51dfc6f0058dca214a6f4d94ed074a2029b5259.png">   <span class="tex-font-size-small">The picture illustrates the contraction of two vertices marked by red.</span> </center><p>Help Vova cope with his girlfriend&apos;s task. Find the maximum length of the chain that can be obtained from the resulting graph or else determine that it is impossible to obtain the chain.</p></div><div class="input-specification"><div class="section-title">Input</div><p>The first line contains two integers <span class="tex-span"><i>n</i>,&#x2009;<i>m</i></span> (<span class="tex-span">1&#x2009;&#x2264;&#x2009;<i>n</i>&#x2009;&#x2264;&#x2009;1000</span>, <span class="tex-span">0&#x2009;&#x2264;&#x2009;<i>m</i>&#x2009;&#x2264;&#x2009;100&#x2009;000</span>) &#x2014; the number of vertices and the number of edges in the original graph.</p><p>Next <span class="tex-span"><i>m</i></span> lines contain the descriptions of edges in the format <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub>,&#x2009;<i>b</i><sub class="lower-index"><i>i</i></sub></span> (<span class="tex-span">1&#x2009;&#x2264;&#x2009;<i>a</i><sub class="lower-index"><i>i</i></sub>,&#x2009;<i>b</i><sub class="lower-index"><i>i</i></sub>&#x2009;&#x2264;&#x2009;<i>n</i></span>, <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub>&#x2009;&#x2260;&#x2009;<i>b</i><sub class="lower-index"><i>i</i></sub></span>), which means that there is an edge between vertices <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub></span> and <span class="tex-span"><i>b</i><sub class="lower-index"><i>i</i></sub></span>. It is guaranteed that there is at most one edge between each pair of vertexes.</p></div><div class="output-specification"><div class="section-title">Output</div><p>If it is impossible to obtain a chain from the given graph, print <span class="tex-span">&#x2009;-&#x2009;1</span>. Otherwise, print the maximum possible number of edges in the resulting chain.</p></div><div class="sample-tests"><div class="section-title">Sample test(s)</div><div class="sample-test"><div class="input"><div class="title">Input</div><pre>5 4<br>1 2<br>2 3<br>3 4<br>3 5<br></pre></div><div class="output"><div class="title">Output</div><pre>3<br></pre></div><div class="input"><div class="title">Input</div><pre>4 6<br>1 2<br>2 3<br>1 3<br>3 4<br>2 4<br>1 4<br></pre></div><div class="output"><div class="title">Output</div><pre>-1<br></pre></div><div class="input"><div class="title">Input</div><pre>4 2<br>1 3<br>2 4<br></pre></div><div class="output"><div class="title">Output</div><pre>2<br></pre></div></div></div><div class="note"><div class="section-title">Note</div><p>In the first sample test you can contract vertices <span class="tex-span">4</span> and <span class="tex-span">5</span> and obtain a chain of length <span class="tex-span">3</span>.</p><p>In the second sample test it is initially impossible to contract any pair of vertexes, so it is impossible to achieve the desired result.</p><p>In the third sample test you can contract vertices <span class="tex-span">1</span> and <span class="tex-span">2</span> and obtain a chain of length <span class="tex-span">2</span>.</p></div></div></div>
</div>